{% extends 'portal/shared/base_portal.html' %}
{% load static %}

{% block title %}Mark Attendance - Instructor Portal{% endblock %}

{% block sidebar_subtitle %}Manage your courses and students{% endblock %}

{% block sidebar_nav %}
<a href="{% url 'portal:instructor_attendance' %}" class="nav-link active">
    <i class="fas fa-calendar-check"></i>
    Attendance
</a>
{% endblock %}

{% block content %}
<div class="portal-card">
    <div class="card-header">
        <h3 class="card-title">
            <i class="fas fa-check-circle"></i>
            Mark Attendance - {{ session.title }}
        </h3>
        <a href="{% url 'portal:instructor_attendance' %}" class="btn-secondary-portal">
            <i class="fas fa-arrow-left"></i>
            Back
        </a>
    </div>
    
    <div class="mb-4">
        <p><strong>Batch:</strong> {{ session.batch.name }}</p>
        <p><strong>Course:</strong> {{ session.batch.course.title }}</p>
        <p><strong>Date & Time:</strong> {{ session.start_datetime|date:"M d, Y H:i" }}</p>
        <p><strong>Location:</strong> {{ session.location|default:"-" }}</p>
    </div>
    
    <form method="post">
        {% csrf_token %}
        <input type="hidden" name="session_id" value="{{ session.id }}">
        
        <div class="mb-3">
            <label class="form-label">Select Students:</label>
            <div class="list-group">
                {% for enrollment in enrollments %}
                <div class="list-group-item">
                    <div class="form-check">
                        <input type="checkbox" name="enrollments" value="{{ enrollment.id }}" 
                               id="enrollment_{{ enrollment.id }}" class="form-check-input">
                        <label for="enrollment_{{ enrollment.id }}" class="form-check-label">
                            <strong>{{ enrollment.user.get_full_name|default:enrollment.user.username }}</strong>
                            <br>
                            <small class="text-muted">{{ enrollment.user.email }}</small>
                        </label>
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>
        
        <div class="mb-3">
            <label class="form-label">Status:</label>
            <div class="form-check">
                <input type="radio" name="present" value="true" id="present_true" class="form-check-input" checked>
                <label for="present_true" class="form-check-label">Present</label>
            </div>
            <div class="form-check">
                <input type="radio" name="present" value="false" id="present_false" class="form-check-input">
                <label for="present_false" class="form-check-label">Absent</label>
            </div>
        </div>
        
        <div class="d-flex gap-2">
            <button type="submit" class="btn-primary-portal">
                <i class="fas fa-save"></i>
                Mark Attendance
            </button>
            <a href="{% url 'portal:instructor_attendance' %}" class="btn-secondary-portal">
                Cancel
            </a>
        </div>
    </form>
</div>
{% endblock %}




